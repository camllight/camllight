DESCRIPTION:

This directory contains files to help editing Caml code, running a
Caml toplevel, and running the Caml debugger under the Gnu Emacs editor.

AUTHORS:

Xavier Leroy (Xavier.Leroy@inria.fr), Jerome Vouillon (Jerome.Vouillon@ens.fr).
camldebug.el is derived from FSF code.

CONTENTS:

    caml.el         A major mode for editing Caml code in Gnu Emacs
    inf-caml.el     To run a Caml toplevel under Emacs, with input and
                    output in an Emacs buffer.    
    camldebug.el    To run the Caml debugger under Emacs.
    comint.el       Compatibility library for Emacs 18.

NOTE FOR EMACS 18 USERS:

You will have to copy and byte-compile comint.el in your Emacs Lisp directory.
Also, the display of the current event is extremely crude under Emacs 18.

USAGE:

Add the following lines to your .emacs file:

(setq auto-mode-alist (cons '("\\.ml[iylp]?" . caml-mode) auto-mode-alist))
(autoload 'caml-mode "caml" "Major mode for editing Caml code." t)
(autoload 'run-caml "inf-caml" "Run an inferior Caml process." t)
(autoload 'camldebug "camldebug" "Run the Caml debugger." t)

The Caml major mode is triggered by visiting a file with extension .ml,
.mli, .mly. .mll or .mlp, or manually by M-x caml-mode. It gives you the
correct syntax table for the Caml language, and also a rudimentary
indentation facility:

- pressing TAB at the beginning of a line indents the line like the line above

- extra TABs increase the indentation level (by 2 spaces by default)

- M-TAB decreases the indentation level.

This is crude, but a fancy automatic indentation (as in C-mode) is
very hard to do, because of the complexity of the Caml syntax, and
because there is no established indentation standard for Caml code.

The Caml mode also allows you to run batch Caml compilations from
Emacs (using M-x compile) and browse the errors (C-x `). Typing C-x `
sets the point at the beginning of the erroneous program fragment, and
the mark at the end. Under Emacs 19, the program fragment is
temporarily highlighted.

M-x run-caml starts a Caml toplevel with input and output in an Emacs
buffer named *inferior-caml*. This gives you the full power of Emacs
to edit the input to the Caml toplevel. An history of input lines is
maintained:

        RET             send the current line to the toplevel
        M-n and M-p     move in the history
        M-r and M-s     regexp search in the history
        C-c C-c         send a break to the Caml toplevel.

After M-x run-caml, typing C-x C-e or M-C-x in a buffer in Caml mode
sends the current phrase (containing the point) to the Caml toplevel,
and evaluates it.

M-x camldebug FILE starts the Caml debugger camldebug on the executable
FILE, with input and output in an Emacs buffer named *camldebug-FILE*.
In addition to the usual comint bindings, the following key bindings are
available in this buffer:

        ESC r           run (execute program forward)
        ESC b           back (execute program one step backward)
        ESC s           step (execute program one step forward)
        C-c >           down (select frame below current frame)
        C-c <           up (select frame above current frame)
        C-c C-f         finish (run till current function returns)

In any buffer in caml mode, C-x SPC sets a breakpoint at the current position.

